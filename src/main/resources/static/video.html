<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>video</title>
</head>
<link rel="stylesheet" href="css/main.css">
<link rel="stylesheet" href="css/video.css">
<script src="js/jquery.min.js"></script>
<body>

<nav class="mainNav" style="z-index: 9">
    <div class="logo">

    </div>
    <div class="functions">
        <textarea class="search" placeholder="大家正在搜:真相奶茶"></textarea><img src="images/search.png" alt=""
                                                                          onclick="search()">
        <ul>
            <li><a href="person.html" id="person"></a></li>
            <li><a href="home.html">首页</a></li>
            <li><a href="video.html">视频</a></li>
            <li><a href="mynote.html">关注</a></li>
            <li><a href="chatroom.html" onclick="function f() {
                document.getElementById('notices').innerText=0;
              document.getElementById('notices').style.display='none';
            }">聊天</a></li>
        </ul>
    </div>
    <div class="setting">
        <ul>
            <li class="setting-message">
                <!-- 下拉小三角 -->
                消息<p id="notices" style="display: none">0</p>
                <div class="setting-wrapper">
                    <!-- <div class="triangle"></div> -->
                    <ul class="drop-down-message">
                        <li><a href="javascript:;">@我的</a></li>
                        <li><a href="javascript:;">评论</a></li>
                        <li><a href="javascript:;">赞</a></li>
                        <li><a href="javascript:;">私信</a></li>
                        <li><a href="javascript:;">未关注人私信</a></li>
                        <li><a href="javascript:;">群通知</a></li>
                        <li class="last-mes"><a href="javascript:;">消息设置</a></li>
                    </ul>
                </div>
            </li>
            <li class="message-setting">
                设置
                <div class="message-wrapper">
                    <ul class="drop-down-setting">
                        <li><a href="javascript:;">账号设置</a></li>
                        <li><a href="javascript:;">会员中心</a></li>
                        <li><a href="javascript:;">V认证</a></li>
                        <li><a href="javascript:;">账号安全</a></li>
                        <li><a href="javascript:;">隐私设置</a></li>
                        <li><a href="javascript:;">屏蔽设置</a></li>
                        <li><a href="javascript:;">消息设置</a></li>
                        <li><a href="javascript:;">帮助中心</a></li>
                        <li><a href="javascript:;" class="out">退出</a></li>
                    </ul>
                </div>
            </li>
            <li>其他</li>
        </ul>
    </div>
</nav>


<!--content-->
<div class="content">
    <div class="mainLeft">
        <ul class="types">
            <li><a href="javascript:;" onclick="showThisTypeVideos(this)">美食</a></li>
            <li><a href="javascript:;" onclick="showThisTypeVideos(this)">游戏</a></li>
            <li><a href="javascript:;" onclick="showThisTypeVideos(this) ">音乐</a></li>
            <li><a href="javascript:;" onclick="showThisTypeVideos(this)">影视</a></li>
            <li><a href="javascript:;" onclick="showThisTypeVideos(this)">旅游</a></li>
            <li><a href="javascript:;" onclick="showThisTypeVideos(this)">体育</a></li>
            <li><a href="javascript:;" onclick="showThisTypeVideos(this)">娱乐综艺</a></li>
            <li><a href="javascript:;" onclick="showThisTypeVideos(this)">人文艺术</a></li>
            <li><a href="javascript:;" onclick="showThisTypeVideos(this)">时尚美妆</a></li>
            <li><a href="javascript:;" onclick="showThisTypeVideos(this)">动漫</a></li>
            <li><a href="javascript:;" onclick="showThisTypeVideos(this)">VLOG</a></li>
            <li><a href="javascript:;" onclick="showThisTypeVideos(this)">搞笑幽默</a></li>
            <li><a href="javascript:;" onclick="showThisTypeVideos(this)">舞蹈</a></li>
            <li><a href="javascript:;" onclick="showThisTypeVideos(this)">纪录片</a></li>
            <li><a href="javascript:;" onclick="showThisTypeVideos(this)">评测</a></li>
            <li><a href="javascript:;" onclick="showThisTypeVideos(this)">故事</a></li>
            <li><a href="javascript:;" onclick="showThisTypeVideos(this)">日榜</a></li>
            <li><a href="javascript:;" onclick="showThisTypeVideos(this)">超然视频</a></li>
        </ul>
    </div>


    <div class="main">
        <p id="topic">试吃各种奇葩网红冰淇淋！居然还有臭豆腐小龙虾烤地瓜口味的！</p>
        <div class="mainVideo" id="videoId">
<!--            <div class="userInfo"><img src="http://qb5b2c5x3.bkt.clouddn.com/Firefox_wallpaper.png" alt="" id="userImg">-->
<!--                <div class="userSimple">-->
<!--                    <p id="userName" style="width: auto;height: 30px;font-style: normal;color: black;size: 30px;text-align: left;margin-bottom: 4px;line-height: 30px;">zhj666</p>-->
<!--                    <p id="userPersonalized" style="width: auto;height: 5px;font-style: normal;color: black;size: 5px;text-align: left;margin-bottom: 4px;line-height: 5px;"></p>-->
<!--                </div>-->
<!--                <div class="userFunc">-->
<!--                    <ul class="selected">-->
<!--                        <li value="1"><a href="">帮上头条</a></li>-->
<!--                        <li value="3"><a href="">取关</a></li>-->
<!--                        <li value="2"><a href="">关注</a></li>-->
<!--                        <li value="4"><a href="">不在显示</a></li>-->
<!--                    </ul>-->
<!--                </div>-->
<!--            </div>-->
<!--            <video id="mainVideo" src="http://qb5b2c5x3.bkt.clouddn.com/176f6784-6ac6-4558-a8cc-712ccd0a5148-.mp4"-->
<!--                   class="video" width="70%" height="60%" controls type="video/mp4"-->
<!--                   style="display: block;margin: 0 65px;background: snow">-->
<!--            </video>-->
<!--            <div class="remark">-->

<!--            </div>-->

        </div>

        <div class="allVideos">
            <span>编辑精选</span>
            <!--                        <div class="littlev" id="123">-->
            <!--                            <video src="http://qb5b2c5x3.bkt.clouddn.com/176f6784-6ac6-4558-a8cc-712ccd0a5148-.mp4" width="208" height="116" controls type="video/mp4">-->
            <!--                            </video>-->
            <!--                            <div class="p">黄骨鱼焖豆腐，从洗到腌制，掌握关键步骤，鱼肉鲜嫩，酸辣</div>-->
            <!--                        </div>-->


        </div>
    </div>
</div>

<script src="js/jquery.cookie.js"></script>
<script src="js/main.js"></script>
<script>

    onload = function () {
        comId = $.cookie("userId");
        var wsUrl="ws:"+window.location.host+"//websocket/"+comId

         socket = null;

        // 初始化websocket
        socket = new WebSocket(wsUrl);
        socket.onopen = function () {
            console.log("hkjllllllllllllllllllll");
        }
        socket.onmessage = function (data) {
            var mesnum = document.getElementById('notices').innerText;
            mesnum = parseInt(mesnum) + 1;
            document.getElementById('notices').innerText = mesnum;
            document.getElementById('notices').style.display = 'block'
            console.log("data:" + data);
            var record = JSON.parse(data.data);

            console.log("你收到了来自" + record.comUserId + "的消息");
        }
        dealvideos("美食")


    }

    function dealvideos(type) {
            console.log(type)

        console.log("...............")
        $.ajax({
            url: "video/videoInfoPage",
            data: {type: type},
            type: "POST",
            success: function (data) {
                console.log(data);
                var videos = data.data;

                for (var i = 0; i < data.data.length; i++) {
                    console.log(videos)
                    if (i == 0) {
                        var mainVideo=document.getElementById("videoId")
                        mainVideo.innerHTML="  <div class=\"userInfo\"><img src='"+videos[i].user.userImg+"' alt=\"\" id=\"userImg\">\n" +
                            "                <div class=\"userSimple\">\n" +
                            "                    <p id=\"userName\" style=\"width: auto;height: 30px;font-style: normal;color: black;size: 30px;text-align: left;margin-bottom: 4px;line-height: 30px;\">"+videos[i].user.userName+"</p>\n" +
                            "                    <p id=\"userPersonalized\" style=\"width: auto;height: 5px;font-style: normal;color: black;size: 5px;text-align: left;margin-bottom: 4px;line-height: 5px;\">"+videos[i].user.userPersonalized+"</p>\n" +
                            "                </div>\n" +
                            "                <div class=\"userFunc\">\n" +
                            "                    <ul class=\"selected\">\n" +
                            "                        <li value=\"1\"><a href=\"\">帮上头条</a></li>\n" +
                            "                        <li value=\"3\"><a href=\"\">取关</a></li>\n" +
                            "                        <li value=\"2\"><a href=\"\">关注</a></li>\n" +
                            "                        <li value=\"4\"><a href=\"\">不在显示</a></li>\n" +
                            "                    </ul>\n" +
                            "                </div>\n" +
                            "            </div>\n" +
                            "            <video id=\"mainVideo\" src=\""+videos[i].video.videoUrl+"\"\n" +

                            "                   class=\"video\" width=\"70%\" height=\"60%\" controls type=\"video/mp4\"\n" +
                            "                   style=\"display: block;margin: 0 65px;background: snow\">\n" +
                            "            </video>\n" +
                            "            <div class=\"remark\" id='"+videos[i].video.messageId+"'>\n" +
                            "\n" +
                            "            </div>\n"


                        $("#topic").text(videos[0].messageInfo);

                    } else {
                        var div_t=document.createElement("div");
                        div_t.className="littlev";
                        div_t.id= videos[i].video.videoId;
                        div_t.innerHTML="<video src='"+videos[i].video.videoUrl+"' width=\"208\" height=\"116\" controls type=\"video/mp4\">\n" +
                            "                                        </video>\n" +
                            "                                        <div class=\"p\">"+videos[i].messageInfo+"" +
                            "</div>"

                        var allvideos = document.getElementsByClassName("allVideos")[0];

                        if (i == 1) {
                            allvideos.innerHTML = "";
                        }
                        $(allvideos).append($(div_t));

                    }
                }
            }
        })
    }

    function showThisTypeVideos(obj) {

        var type = obj.innerText;
        console.log(type)
        dealvideos(type);

    }

    function search() {
        var key = document.getElementsByClassName("search")[0].innerText;

    }



</script>

<script>

    // var modify = document.getElementsByClassName("modify")[0];
    // modify.onclick = function(){
    //     // alert("test");
    //     var modifyWrapper = document.getElementsByClassName("modify-wrapper")[0];
    //     modifyWrapper.style.display = "block";
    //
    // };

    $("#person").innerText=$.cookie("userName");
</script>
</body>
</html>